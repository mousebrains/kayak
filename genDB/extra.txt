-- American Whitewater info

INSERT OR REPLACE INTO GuideBooks (name,url,urlBase) VALUES
  ('American Whitewater', 
   'http://www.americanwhitewater.org',
   'https://www.americanwhitewater.org/content/River/detail/id/'
  );

-- Alsea@Tidewater

UPDATE master SET latitudePutin=44.3844,longitudePutin=-123.621,latitudeTakeout=44.4043,longitudeTakeout=-123.896 WHERE sortKey='Alsea c aa'; -- Alsea@Tidewater

INSERT OR REPLACE INTO Guides (key,bookKey,name,url) VALUES 
  ((SELECT key FROM master WHERE sortKey='Alsea c aa'),
   (SELECT bookKey FROM GuideBooks WHERE name='American Whitewater'),
   'Alsea at Tidewater',
   '1483');

-- Breitenbush

UPDATE master SET latitudePutin=44.7776,longitudePutin=-121.998,latitudeTakeout=44.7528,longitudeTakeout=-122.128 WHERE sortKey='Breitenbush aa'; -- Breitenbush

INSERT OR REPLACE INTO Guides (key,bookKey,name,url) VALUES 
  ((SELECT key FROM master WHERE sortKey='Breitenbush aa'),
   (SELECT bookKey FROM GuideBooks WHERE name='American Whitewater'),
   'Breitenbush',
   '1487');

-- Nate's Wheels and Water

INSERT OR REPLACE INTO GuideBooks (name,author,url,urlBase) VALUES 
  ('Wheels and Water', 
   'Nate Pfiefer', 
   'http://wheelsandwater.blogspot.com',
   'http://wheelsandwater.blogspot.com/'
  );

INSERT OR REPLACE INTO Guides (key,bookKey,name,url) VALUES
  ((SELECT key FROM master WHERE sortKey='Breitenbush aa'),
   (SELECT bookKey FROM GuideBooks WHERE name='Wheels and Water'),
   'Breitenbush',
   '2013/04/the-breitenbush-river-or-33013.html');

-- Jason's Oregon Kayaking

INSERT OR REPLACE INTO GuideBooks (name,author,url,urlBase) VALUES 
  ('Oregon Kayaking', 
   'Jason Rackley', 
   'http://www.oregonkayaking.net',
   'http://www.oregonkayaking.net/rivers/'
  );

INSERT OR REPLACE INTO Guides (key,bookKey,name,url) VALUES
  ((SELECT key FROM master WHERE sortKey='Breitenbush aa'),
   (SELECT bookKey FROM GuideBooks WHERE name='Oregon Kayaking'),
   'Breitenbush',
   'breitenbush/breitenbush.html');

-- Fix USGS IDs

UPDATE gauges SET idUSGS='14326510' WHERE idCBTT='MYPO3'; -- SF Coquille@Myrtle Point
UPDATE gauges SET idUSGS='14327055' WHERE idCBTT='COQO3'; -- Coquille@Coquille

UPDATE gauges SET idUSGS='14079800' WHERE idCBTT='CRPO3'; -- Crooked above Prineville Resv
UPDATE dataSource SET name='CRPO3' WHERE name='CRPO'; -- Crooked above Prineville Resv

UPDATE gauges SET idUSGS='14070500' WHERE idCBTT='DEBO3'; -- Deschutes below bend

-- Fix CBTT IDs

-- Oregon xxxO -> xxxO3

UPDATE gauges SET idCBTT=(SELECT idCBTT || '3' FROM gauges WHERE idCBTT LIKE '%o') WHERE idCBTT LIKE '%o';

UPDATE OR IGNORE dataSource SET name=(SELECT name || '3' FROM dataSource WHERE name LIKE '%o') WHERE name LIKE '%o';

-- Idaho xxxI -> xxxI3

UPDATE gauges SET idCBTT=(SELECT idCBTT || '1' FROM gauges WHERE idCBTT LIKE '%i') WHERE idCBTT LIKE '%i';

UPDATE OR IGNORE dataSource SET name=(SELECT name || '1' FROM dataSource WHERE name LIKE '%i') WHERE name LIKE '%i';

-- Washington xxxW -> xxxW3

UPDATE gauges SET idCBTT=(SELECT idCBTT || '1' FROM gauges WHERE idCBTT LIKE '%w') WHERE idCBTT LIKE '%w';

UPDATE OR IGNORE dataSource SET name=(SELECT name || '1' FROM dataSource WHERE name LIKE '%w') WHERE name LIKE '%w';

-- Link gaugeKey to dataSource if gaugeKey in dataSource is zero

UPDATE dataSource SET gaugeKey=(SELECT gaugeKey FROM gauges WHERE idUSGS IN (SELECT name FROM dataSource WHERE gaugeKey=0)) WHERE name IN (SELECT idUSGS FROM gauges WHERE idUSGS IN (SELECT name FROM dataSource WHERE gaugeKey=0));

-- Rogue below Prospect
INSERT OR REPLACE INTO dataSource (name,gaugeKey) VALUES('RPRO3',(SELECT gaugekey FROM gauges WHERE idCBTT='RPRO3'));
